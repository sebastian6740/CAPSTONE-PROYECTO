<ion-content [scrollEvents]="true" (ionScroll)="onScroll($event)">
  <div class="sticky-header" [class.header-hidden]="headerHidden">
    <ion-toolbar class="contenido">
        <!-- Cubos animados de fondo -->
        <div class="cube"></div>
        <div class="cube"></div>
        <div class="cube"></div>
        <div class="cube"></div>
        <div class="cube"></div>
        <div class="cube"></div>

        <div class="header-title">
          <h1>Trueque App</h1>
           <img src="assets/img/trueques.png" alt="Logo de Trueques" class="logo-img">
          <p>Intercambia lo que quieras</p>
        </div>

        <!-- Widget de Puntos -->
        <div class="puntos-widget" (click)="irARecompensas()">
          <div class="puntos-contenido">
            <span class="puntos-icono">ðŸ’Ž</span>
            <div class="puntos-texto">
              <span class="puntos-label">Mis Puntos</span>
              <span class="puntos-valor">{{ puntosActuales }}</span>
            </div>
          </div>
          <ion-icon name="chevron-forward" class="puntos-flecha"></ion-icon>
        </div>

        <!-- Barra de bÃºsqueda -->
        <div class="search-bar">
          <ion-searchbar placeholder="Buscar" mode="ios"></ion-searchbar>
        </div>

        <!-- Filtros de categorÃ­a -->
        <div class="filters">
          <ion-button
            [fill]="categoriaSeleccionada === '' ? 'solid' : 'outline'"
            size="small"
            (click)="filtrarPorCategoria('')">
            Todos
          </ion-button>
          <ion-button
            [fill]="categoriaSeleccionada === 'electronica' ? 'solid' : 'outline'"
            size="small"
            (click)="filtrarPorCategoria('electronica')">
            ðŸ“± ElectrÃ³nica
          </ion-button>
          <ion-button
            [fill]="categoriaSeleccionada === 'videojuegos' ? 'solid' : 'outline'"
            size="small"
            (click)="filtrarPorCategoria('videojuegos')">
            ðŸŽ® Videojuegos
          </ion-button>
          <ion-button
            [fill]="categoriaSeleccionada === 'libros' ? 'solid' : 'outline'"
            size="small"
            (click)="filtrarPorCategoria('libros')">
            ðŸ“š Libros
          </ion-button>
          <ion-button
            [fill]="categoriaSeleccionada === 'ropa' ? 'solid' : 'outline'"
            size="small"
            (click)="filtrarPorCategoria('ropa')">
            ðŸ‘• Ropa
          </ion-button>
        </div>
    </ion-toolbar>
  </div>
  <!-- Mensaje cuando no hay artÃ­culos -->
  <div *ngIf="trueques.length === 0" class="sin-articulos">
    <ion-icon name="cube-outline" class="icono-vacio"></ion-icon>
    <h3>No hay artÃ­culos</h3>
    <p *ngIf="categoriaSeleccionada">No hay artÃ­culos en esta categorÃ­a</p>
    <p *ngIf="!categoriaSeleccionada">Â¡SÃ© el primero en publicar un artÃ­culo!</p>
  </div>

  <!-- Grid de trueques -->
  <div class="trueques-grid" *ngIf="trueques.length > 0">
    <div *ngFor="let trueque of trueques" class="trueque-card" (click)="verDetalle(trueque)">
      <!-- Imagen/Emoji -->
      <div [ngClass]="trueque.color" class="trueque-imagen">
        <img *ngIf="trueque.foto" [src]="trueque.foto" alt="Foto del artÃ­culo" class="articulo-foto">
        <span *ngIf="!trueque.foto">{{ trueque.emoji }}</span>
      </div>

      <!-- Contenido -->
      <div class="trueque-contenido">
        <h3 class="trueque-nombre">{{ trueque.nombre }}</h3>
        <p class="trueque-cambio">{{ trueque.cambio }}</p>

        <div class="trueque-ubicacion">
          <ion-icon name="location"></ion-icon>
          <span>{{ trueque.ciudad }}</span>
        </div>
      </div>

      <!-- BotÃ³n Ver Detalle -->
      <ion-button expand="block" color="primary" size="small" (click)="verDetalle(trueque)">
        Ver detalle
      </ion-button>
    </div>
  </div>

  <!-- SecciÃ³n de bÃºsqueda -->
  <div class="buscar-ideal">
    <h3>Buscar cambio ideal</h3>
    <p>No encontraste lo que buscas? Publica tu artÃ­culo</p>
    <ion-button expand="block" color="gray" (click)="irACrearTrueque()">
      Publicar artÃ­culo
    </ion-button>
  </div>
</ion-content>



<!-- Bottom Navigation -->
<ion-footer class="contenido-menu">
  <ion-toolbar>
    <div class="bottom-nav">
      <button 
        class="nav-button" 
        [class.active]="tabActiva === 'home'"
        (click)="cambiarTab('home')">
        <ion-icon name="home"></ion-icon>
        <span>Inicio</span>
      </button>

      <button
        class="nav-button"
        [class.active]="tabActiva === 'messages'"
        (click)="cambiarTab('messages')">
        <div class="icon-with-badge">
          <ion-icon name="chatbubble-outline"></ion-icon>
          <span *ngIf="mensajesNoLeidos > 0" class="badge-count">{{ mensajesNoLeidos }}</span>
        </div>
        <span>Mensajes</span>
      </button>

      <button 
  class="nav-button" 
  [class.active]="tabActiva === 'perfil'"
  (click)="cambiarTab('perfil')">
  <ion-icon name="person"></ion-icon>
  <span>Perfil</span>
</button>
    </div>
  </ion-toolbar>
</ion-footer>